/*! name: vanilla-calendar-pro v3.0.0 | url: https://github.com/uvarov-frontend/vanilla-calendar-pro */
var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__spreadValues=(e,t)=>{for(var a in t||(t={}))__hasOwnProp.call(t,a)&&__defNormalProp(e,a,t[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(t))__propIsEnum.call(t,a)&&__defNormalProp(e,a,t[a]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__publicField=(e,t,a)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,a),a);const errorMessages={notFoundSelector:e=>`${e} is not found, check the first argument passed to new Calendar.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:"You specified an incorrect language label or did not specify the required number of values ​​for «locale.weekdays» or «locale.months».",incorrectTime:"The value of the time property can be: false, 12 or 24.",incorrectMonthsCount:"For the «multiple» calendar type, the «displayMonthsCount» parameter can have a value from 2 to 12, and for all others it cannot be greater than 1."},setContext=(e,t,a)=>{e.context[t]=a},destroy=e=>{var t,a,n,l,o;if(!e.context.isInit)throw new Error(errorMessages.notInit);e.inputMode?(null==(t=e.context.mainElement.parentElement)||t.removeChild(e.context.mainElement),null==(n=null==(a=e.context.inputElement)?void 0:a.replaceWith)||n.call(a,e.context.originalElement),setContext(e,"inputElement",void 0)):null==(o=(l=e.context.mainElement).replaceWith)||o.call(l,e.context.originalElement),setContext(e,"mainElement",e.context.originalElement),e.onDestroy&&e.onDestroy(e)},hide=e=>{e.context.currentType&&(e.context.mainElement.dataset.vcCalendarHidden="",e.onHide&&e.onHide(e))};function getOffset(e){if(!e||!e.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const t=e.getBoundingClientRect(),a=document.documentElement;return{bottom:t.bottom,right:t.right,top:t.top+window.scrollY-a.clientTop,left:t.left+window.scrollX-a.clientLeft}}function getViewportDimensions(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function getWindowScrollPosition(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function calculateAvailableSpace(e){const{top:t,left:a}=getWindowScrollPosition(),{top:n,left:l}=getOffset(e),{vh:o,vw:s}=getViewportDimensions(),i=n-t,r=l-a;return{top:i,bottom:o-(i+e.clientHeight),left:r,right:s-(r+e.clientWidth)}}function getAvailablePosition(e,t,a=5){const n={top:!0,bottom:!0,left:!0,right:!0},l=[];if(!t||!e)return{canShow:n,parentPositions:l};const{bottom:o,top:s}=calculateAvailableSpace(e),{top:i,left:r}=getOffset(e),{height:c,width:d}=t.getBoundingClientRect(),{vh:u,vw:m}=getViewportDimensions(),h=m/2,p=u/2;return[{condition:i<p,position:"top"},{condition:i>p,position:"bottom"},{condition:r<h,position:"left"},{condition:r>h,position:"right"}].forEach((({condition:e,position:t})=>{e&&l.push(t)})),Object.assign(n,{top:c<=s-a,bottom:c<=o-a,left:d<=r,right:d<=m-r}),{canShow:n,parentPositions:l}}const handleDay=(e,t,a,n)=>{var l;const o=n.querySelector(`[data-vc-date="${t}"]`);if(!o)return;const s=o.querySelector("[data-vc-date-btn]");if((null==a?void 0:a.modifier)&&s.classList.add(...a.modifier.trim().split(" ")),!(null==a?void 0:a.html))return;const i=document.createElement("div");i.className=e.styles.datePopup,i.dataset.vcDatePopup="",i.innerHTML=e.sanitizerHTML(a.html),s.ariaExpanded="true",s.ariaLabel=`${s.ariaLabel}, ${null==(l=null==i?void 0:i.textContent)?void 0:l.replace(/^\s+|\s+(?=\s)|\s+$/g,"").replace(/&nbsp;/g," ")}`,o.appendChild(i),requestAnimationFrame((()=>{if(!i)return;const{canShow:e}=getAvailablePosition(o,i),t=e.bottom?o.offsetHeight:-i.offsetHeight,a=e.left&&!e.right?o.offsetWidth-i.offsetWidth/2:!e.left&&e.right?i.offsetWidth/2:0;Object.assign(i.style,{left:`${a}px`,top:`${t}px`})}))},createDatePopup=(e,t)=>{var a;e.popups&&(null==(a=Object.entries(e.popups))||a.forEach((([a,n])=>handleDay(e,a,n,t))))},getDate=e=>new Date(`${e}T00:00:00`),getDateString=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,parseDates=e=>e.reduce(((e,t)=>{if(t instanceof Date||"number"==typeof t){const a=t instanceof Date?t:new Date(t);e.push(a.toISOString().substring(0,10))}else t.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(t):t.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,((t,a,n)=>{const l=getDate(a),o=getDate(n),s=new Date(l.getTime());for(;s<=o;s.setDate(s.getDate()+1))e.push(getDateString(s));return t}));return e}),[]),updateAttribute=(e,t,a,n="")=>{t?e.setAttribute(a,n):e.getAttribute(a)===n&&e.removeAttribute(a)},setDateModifier=(e,t,a,n,l,o,s)=>{var i,r,c,d;const u=getDate(e.context.displayDateMin)>getDate(o)||getDate(e.context.displayDateMax)<getDate(o)||(null==(i=e.context.disableDates)?void 0:i.includes(o))||!e.selectionMonthsMode&&"current"!==s||!e.selectionYearsMode&&getDate(o).getFullYear()!==t;updateAttribute(a,u,"data-vc-date-disabled"),n&&updateAttribute(n,u,"aria-disabled","true"),n&&updateAttribute(n,u,"tabindex","-1"),updateAttribute(a,!e.disableToday&&e.context.dateToday===o,"data-vc-date-today"),updateAttribute(a,!e.disableToday&&e.context.dateToday===o,"aria-current","date"),updateAttribute(a,null==(r=e.selectedWeekends)?void 0:r.includes(l),"data-vc-date-weekend");const m=(null==(c=e.selectedHolidays)?void 0:c[0])?parseDates(e.selectedHolidays):[];if(updateAttribute(a,m.includes(o),"data-vc-date-holiday"),(null==(d=e.context.selectedDates)?void 0:d.includes(o))?(a.setAttribute("data-vc-date-selected",""),n&&n.setAttribute("aria-selected","true"),e.context.selectedDates.length>1&&"multiple-ranged"===e.selectionDatesMode&&(e.context.selectedDates[0]===o&&a.setAttribute("data-vc-date-selected","first"),e.context.selectedDates[e.context.selectedDates.length-1]===o&&a.setAttribute("data-vc-date-selected","last"),e.context.selectedDates[0]!==o&&e.context.selectedDates[e.context.selectedDates.length-1]!==o&&a.setAttribute("data-vc-date-selected","middle"))):a.hasAttribute("data-vc-date-selected")&&(a.removeAttribute("data-vc-date-selected"),n&&n.removeAttribute("aria-selected")),!e.context.disableDates.includes(o)&&e.enableEdgeDatesOnly&&e.context.selectedDates.length>1&&"multiple-ranged"===e.selectionDatesMode){const t=getDate(e.context.selectedDates[0]),n=getDate(e.context.selectedDates[e.context.selectedDates.length-1]),l=getDate(o);updateAttribute(a,l>t&&l<n,"data-vc-date-selected","middle")}},getLocaleString=(e,t,a)=>new Date(`${e}T00:00:00.000Z`).toLocaleString(t,a),getWeekNumber=(e,t)=>{const a=getDate(e),n=(a.getDay()-t+7)%7;a.setDate(a.getDate()+4-n);const l=new Date(a.getFullYear(),0,1),o=Math.ceil(((+a-+l)/864e5+1)/7);return{year:a.getFullYear(),week:o}},addWeekNumberForDate=(e,t,a)=>{const n=getWeekNumber(a,e.firstWeekday);n&&(t.dataset.vcDateWeekNumber=String(n.week))},setDaysAsDisabled=(e,t,a)=>{var n,l,o,s,i;const r=null==(n=e.disableWeekdays)?void 0:n.includes(a),c=e.disableAllDates&&!!(null==(l=e.context.enableDates)?void 0:l[0]);!r&&!c||(null==(o=e.context.enableDates)?void 0:o.includes(t))||(null==(s=e.context.disableDates)?void 0:s.includes(t))||(e.context.disableDates.push(t),null==(i=e.context.disableDates)||i.sort(((e,t)=>+new Date(e)-+new Date(t))))},createDate=(e,t,a,n,l,o)=>{const s=getDate(l).getDay(),i="string"==typeof e.locale&&e.locale.length?e.locale:"en",r=document.createElement("div");let c;r.className=e.styles.date,r.dataset.vcDate=l,r.dataset.vcDateMonth=o,r.dataset.vcDateWeekDay=String(s),("current"===o||e.displayDatesOutside)&&(c=document.createElement("button"),c.className=e.styles.dateBtn,c.type="button",c.role="gridcell",c.ariaLabel=getLocaleString(l,i,{dateStyle:"long",timeZone:"UTC"}),c.dataset.vcDateBtn="",c.innerText=String(n),r.appendChild(c)),e.enableWeekNumbers&&addWeekNumberForDate(e,r,l),setDaysAsDisabled(e,l,s),setDateModifier(e,t,r,c,s,l,o),a.appendChild(r),e.onCreateDateEls&&e.onCreateDateEls(e,r)},createDatesFromCurrentMonth=(e,t,a,n,l)=>{for(let o=1;o<=a;o++){const a=new Date(n,l,o);createDate(e,n,t,o,getDateString(a),"current")}},createDatesFromNextMonth=(e,t,a,n,l,o)=>{const s=o+a,i=7*Math.ceil(s/7)-s,r=l+1===12?n+1:n,c=l+1===12?"01":l+2<10?`0${l+2}`:l+2;for(let a=1;a<=i;a++){const l=a<10?`0${a}`:String(a);createDate(e,n,t,a,`${r}-${c}-${l}`,"next")}},createDatesFromPrevMonth=(e,t,a,n,l)=>{let o=new Date(a,n,0).getDate()-(l-1);const s=0===n?a-1:a,i=0===n?12:n<10?`0${n}`:n;for(let n=l;n>0;n--,o++){createDate(e,a,t,o,`${s}-${i}-${o}`,"prev")}},createWeekNumbers=(e,t,a,n,l)=>{if(!e.enableWeekNumbers)return;n.textContent="";const o=document.createElement("b");o.className=e.styles.weekNumbersTitle,o.innerText="#",o.dataset.vcWeekNumbers="title",n.appendChild(o);const s=document.createElement("div");s.className=e.styles.weekNumbersContent,s.dataset.vcWeekNumbers="content",n.appendChild(s);const i=document.createElement("button");i.type="button",i.className=e.styles.weekNumber;const r=l.querySelectorAll("[data-vc-date]"),c=Math.ceil((t+a)/7);for(let t=0;t<c;t++){const a=r[0===t?6:7*t].dataset.vcDate,n=getWeekNumber(a,e.firstWeekday);if(!n)return;const l=i.cloneNode(!0);l.innerText=String(n.week),l.dataset.vcWeekNumber=String(n.week),l.dataset.vcWeekYear=String(n.year),l.role="rowheader",l.ariaLabel=`${n.week}`,s.appendChild(l)}},createDates=e=>{const t=new Date(e.context.selectedYear,e.context.selectedMonth,1),a=e.context.mainElement.querySelectorAll('[data-vc="dates"]'),n=e.context.mainElement.querySelectorAll('[data-vc-week="numbers"]');a.forEach(((a,l)=>{e.selectionDatesMode||(a.dataset.vcDatesDisabled=""),a.textContent="";const o=new Date(t);o.setMonth(o.getMonth()+l);const s=o.getMonth(),i=o.getFullYear(),r=(new Date(i,s,1).getDay()-e.firstWeekday+7)%7,c=new Date(i,s+1,0).getDate();createDatesFromPrevMonth(e,a,i,s,r),createDatesFromCurrentMonth(e,a,c,i,s),createDatesFromNextMonth(e,a,c,i,s,r),createDatePopup(e,a),createWeekNumbers(e,r,c,n[l],a)}))},layoutDefault=e=>`\n  <div class="${e.styles.header}" data-vc="header" role="toolbar" aria-label="${e.labels.navigation}">\n    <#ArrowPrev [month] />\n    <div class="${e.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [month] />\n  </div>\n  <div class="${e.styles.wrapper}" data-vc="wrapper">\n    <#WeekNumbers />\n    <div class="${e.styles.content}" data-vc="content">\n      <#Week />\n      <#Dates />\n      <#DateRangeTooltip />\n    </div>\n  </div>\n  <#ControlTime />\n`,layoutMonths=e=>`\n  <div class="${e.styles.header}" data-vc="header" role="toolbar" aria-label="${e.labels.navigation}">\n    <div class="${e.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n  </div>\n  <div class="${e.styles.wrapper}" data-vc="wrapper">\n    <div class="${e.styles.content}" data-vc="content">\n      <#Months />\n    </div>\n  </div>\n`,layoutMultiple=e=>`\n  <div class="${e.styles.controls}" data-vc="controls" role="toolbar" aria-label="${e.labels.navigation}">\n    <#ArrowPrev [month] />\n    <#ArrowNext [month] />\n  </div>\n  <div class="${e.styles.grid}" data-vc="grid">\n    <#Multiple>\n      <div class="${e.styles.column}" data-vc="column" role="region">\n        <div class="${e.styles.header}" data-vc="header">\n          <div class="${e.styles.headerContent}" data-vc-header="content">\n            <#Month />\n            <#Year />\n          </div>\n        </div>\n        <div class="${e.styles.wrapper}" data-vc="wrapper">\n          <#WeekNumbers />\n          <div class="${e.styles.content}" data-vc="content">\n            <#Week />\n            <#Dates />\n          </div>\n        </div>\n      </div>\n    <#/Multiple>\n    <#DateRangeTooltip />\n  </div>\n  <#ControlTime />\n`,layoutYears=e=>`\n  <div class="${e.styles.header}" data-vc="header" role="toolbar" aria-label="${e.labels.navigation}">\n    <#ArrowPrev [year] />\n    <div class="${e.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [year] />\n  </div>\n  <div class="${e.styles.wrapper}" data-vc="wrapper">\n    <div class="${e.styles.content}" data-vc="content">\n      <#Years />\n    </div>\n  </div>\n`,ArrowNext=(e,t)=>`<button type="button" class="${e.styles.arrowNext}" data-vc-arrow="next" aria-label="${e.labels.arrowNext[t]}"></button>`,ArrowPrev=(e,t)=>`<button type="button" class="${e.styles.arrowPrev}" data-vc-arrow="prev" aria-label="${e.labels.arrowPrev[t]}"></button>`,ControlTime=e=>e.selectionTimeMode?`<div class="${e.styles.time}" data-vc="time" role="group" aria-label="${e.labels.selectingTime}"></div>`:"",DateRangeTooltip=e=>e.onCreateDateRangeTooltip?`<div class="${e.styles.dateRangeTooltip}" data-vc-date-range-tooltip="hidden"></div>`:"",Dates=e=>`<div class="${e.styles.dates}" data-vc="dates" role="grid" aria-live="assertive" aria-label="${e.labels.dates}" ${"multiple"===e.type?"aria-multiselectable":""}></div>`,Month=e=>`<button type="button" class="${e.styles.month}" data-vc="month"></button>`,Months=e=>`<div class="${e.styles.months}" data-vc="months" role="grid" aria-live="assertive" aria-label="${e.labels.months}"></div>`,Week=e=>`<div class="${e.styles.week}" data-vc="week" role="row" aria-label="${e.labels.week}"></div>`,WeekNumbers=e=>e.enableWeekNumbers?`<div class="${e.styles.weekNumbers}" data-vc-week="numbers" role="row" aria-label="${e.labels.weekNumber}"></div>`:"",Year=e=>`<button type="button" class="${e.styles.year}" data-vc="year"></button>`,Years=e=>`<div class="${e.styles.years}" data-vc="years" role="grid" aria-live="assertive" aria-label="${e.labels.years}"></div>`,components={ArrowNext:ArrowNext,ArrowPrev:ArrowPrev,ControlTime:ControlTime,Dates:Dates,DateRangeTooltip:DateRangeTooltip,Month:Month,Months:Months,Week:Week,WeekNumbers:WeekNumbers,Year:Year,Years:Years},getComponent=e=>components[e],parseLayout=(e,t)=>t.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,((t,a)=>{const n=(a.match(/\[(.*?)\]/)||[])[1],l=a.replace(/[/\s\n\t]|\[(.*?)\]/g,""),o=getComponent(l),s=o?o(e,null!=n?n:null):"";return e.sanitizerHTML(s)})).replace(/[\n\t]/g,""),parseMultipleLayout=(e,t)=>t.replace(new RegExp("<#Multiple>(.*?)<#\\/Multiple>","gs"),((t,a)=>{const n=Array(e.context.displayMonthsCount).fill(a).join("");return e.sanitizerHTML(n)})).replace(/[\n\t]/g,""),createLayouts=(e,t)=>{const a={default:layoutDefault,month:layoutMonths,year:layoutYears,multiple:layoutMultiple};if(Object.keys(a).forEach((t=>{const n=t;e.layouts[n].length||(e.layouts[n]=a[n](e))})),e.context.mainElement.className=e.styles.calendar,e.context.mainElement.dataset.vc="calendar",e.context.mainElement.dataset.vcType=e.context.currentType,e.context.mainElement.role="application",e.context.mainElement.tabIndex=0,e.context.mainElement.ariaLabel=e.labels.application,"multiple"!==e.context.currentType){if("multiple"===e.type&&t){const a=e.context.mainElement.querySelector('[data-vc="controls"]'),n=e.context.mainElement.querySelector('[data-vc="grid"]'),l=t.closest('[data-vc="column"]');return a&&e.context.mainElement.removeChild(a),n&&(n.dataset.vcGrid="hidden"),l&&(l.dataset.vcColumn=e.context.currentType),void(l&&(l.innerHTML=e.sanitizerHTML(parseLayout(e,e.layouts[e.context.currentType]))))}e.context.mainElement.innerHTML=e.sanitizerHTML(parseLayout(e,e.layouts[e.context.currentType]))}else e.context.mainElement.innerHTML=e.sanitizerHTML(parseMultipleLayout(e,parseLayout(e,e.layouts[e.context.currentType])))},setVisibilityArrows=(e,t,a,n)=>{e.style.visibility=a?"hidden":"",t.style.visibility=n?"hidden":""},handleDefaultType=(e,t,a)=>{const n=getDate(getDateString(new Date(e.context.selectedYear,e.context.selectedMonth,1))),l=new Date(n.getTime()),o=new Date(n.getTime());l.setMonth(l.getMonth()-e.monthsToSwitch),o.setMonth(o.getMonth()+e.monthsToSwitch);const s=getDate(e.context.dateMin),i=getDate(e.context.dateMax);e.selectionYearsMode||(s.setFullYear(n.getFullYear()),i.setFullYear(n.getFullYear()));const r=!e.selectionMonthsMode||l.getFullYear()<s.getFullYear()||l.getFullYear()===s.getFullYear()&&l.getMonth()<s.getMonth(),c=!e.selectionMonthsMode||o.getFullYear()>i.getFullYear()||o.getFullYear()===i.getFullYear()&&o.getMonth()>i.getMonth();setVisibilityArrows(t,a,r,c)},handleYearType=(e,t,a)=>{const n=getDate(e.context.dateMin),l=getDate(e.context.dateMax),o=!!(n.getFullYear()&&e.context.displayYear-7<=n.getFullYear()),s=!!(l.getFullYear()&&e.context.displayYear+7>=l.getFullYear());setVisibilityArrows(t,a,o,s)},visibilityArrows=e=>{if("month"===e.context.currentType)return;const t=e.context.mainElement.querySelector('[data-vc-arrow="prev"]'),a=e.context.mainElement.querySelector('[data-vc-arrow="next"]');if(!t||!a)return;({default:()=>handleDefaultType(e,t,a),year:()=>handleYearType(e,t,a)})["multiple"===e.context.currentType?"default":e.context.currentType]()},visibilityHandler=(e,t,a,n,l)=>{const o=new Date(n.setFullYear(e.context.selectedYear,e.context.selectedMonth+a)).getFullYear(),s=new Date(n.setMonth(e.context.selectedMonth+a)).getMonth(),i=e.context.locale.months.long[s],r=t.closest('[data-vc="column"]');r&&(r.ariaLabel=`${i} ${o}`);const c={month:{id:s,label:i},year:{id:o,label:o}};t.innerText=String(c[l].label),t.dataset[`vc${l.charAt(0).toUpperCase()+l.slice(1)}`]=String(c[l].id),t.ariaLabel=`${e.labels[l]} ${c[l].label}`;const d={month:e.selectionMonthsMode,year:e.selectionYearsMode},u=!1===d[l]||"only-arrows"===d[l];u&&(t.tabIndex=-1),t.disabled=u},visibilityTitle=e=>{const t=e.context.mainElement.querySelectorAll('[data-vc="month"]'),a=e.context.mainElement.querySelectorAll('[data-vc="year"]'),n=new Date(e.context.selectedYear,e.context.selectedMonth,1);[t,a].forEach((t=>null==t?void 0:t.forEach(((t,a)=>visibilityHandler(e,t,a,n,t.dataset.vc)))))},setYearModifier=(e,t,a,n,l)=>{var o;const s={month:"[data-vc-months-month]",year:"[data-vc-years-year]"},i={month:{selected:"data-vc-months-month-selected",aria:"aria-selected",value:"vcMonthsMonth",selectedProperty:"selectedMonth"},year:{selected:"data-vc-years-year-selected",aria:"aria-selected",value:"vcYearsYear",selectedProperty:"selectedYear"}};l&&(null==(o=e.context.mainElement.querySelectorAll(s[a]))||o.forEach((e=>{e.removeAttribute(i[a].selected),e.removeAttribute(i[a].aria)})),setContext(e,i[a].selectedProperty,Number(t.dataset[i[a].value])),visibilityTitle(e),"year"===a&&visibilityArrows(e)),n&&(t.setAttribute(i[a].selected,""),t.setAttribute(i[a].aria,"true"))},relationshipID=e=>{if("multiple"!==e.type)return 0;const t=e.context.mainElement.querySelectorAll('[data-vc="column"]'),a=Array.from(t).findIndex((e=>e.closest('[data-vc-column="month"]')));return a>0?a:0},createMonthEl=(e,t,a,n,l,o,s)=>{const i=t.cloneNode(!1);return i.className=e.styles.monthsMonth,i.innerText=n,i.ariaLabel=l,i.role="gridcell",i.dataset.vcMonthsMonth=`${s}`,o&&(i.ariaDisabled="true"),o&&(i.tabIndex=-1),i.disabled=o,setYearModifier(e,i,"month",a===s,!1),i},createMonths=(e,t)=>{var a,n;const l=null==(a=null==t?void 0:t.closest('[data-vc="header"]'))?void 0:a.querySelector('[data-vc="year"]'),o=l?Number(l.dataset.vcYear):e.context.selectedYear,s=(null==t?void 0:t.dataset.vcMonth)?Number(t.dataset.vcMonth):e.context.selectedMonth;setContext(e,"currentType","month"),createLayouts(e,t),visibilityTitle(e);const i=e.context.mainElement.querySelector('[data-vc="months"]');if(!e.selectionMonthsMode||!i)return;const r=e.monthsToSwitch>1?e.context.locale.months.long.map(((t,a)=>s-e.monthsToSwitch*a)).concat(e.context.locale.months.long.map(((t,a)=>s+e.monthsToSwitch*a))).filter((e=>e>=0&&e<=12)):Array.from(Array(12).keys()),c=document.createElement("button");c.type="button";for(let t=0;t<12;t++){const a=getDate(e.context.dateMin),n=getDate(e.context.dateMax),l=t<a.getMonth()+relationshipID(e)&&o<=a.getFullYear()||t>n.getMonth()+relationshipID(e)&&o>=n.getFullYear()||t!==s&&!r.includes(t),d=createMonthEl(e,c,s,e.context.locale.months.short[t],e.context.locale.months.long[t],l,t);i.appendChild(d),e.onCreateMonthEls&&e.onCreateMonthEls(e,d)}null==(n=e.context.mainElement.querySelector("[data-vc-months-month]"))||n.focus()},TimeInput=(e,t,a,n,l)=>`\n  <label class="${t}" data-vc-time-input="${e}">\n    <input type="text" name="${e}" maxlength="2" aria-label="${a[`input${e.charAt(0).toUpperCase()+e.slice(1)}`]}" value="${n}" ${l?"disabled":""}>\n  </label>\n`,TimeRange=(e,t,a,n,l,o,s)=>`\n  <label class="${t}" data-vc-time-range="${e}">\n    <input type="range" name="${e}" min="${n}" max="${l}" step="${o}" aria-label="${a[`range${e.charAt(0).toUpperCase()+e.slice(1)}`]}" value="${s}">\n  </label>\n`,handleActions=(e,t,a,n)=>{({hour:()=>setContext(e,"selectedHours",a),minute:()=>setContext(e,"selectedMinutes",a)})[n](),setContext(e,"selectedTime",`${e.context.selectedHours}:${e.context.selectedMinutes}${e.context.selectedKeeping?` ${e.context.selectedKeeping}`:""}`),e.onChangeTime&&e.onChangeTime(e,t,!1),e.inputMode&&e.context.inputElement&&e.context.mainElement&&e.onChangeToInput&&e.onChangeToInput(e,t)},transformTime24=(e,t)=>{var a;return(null==(a={0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"00",PM:"12"}}[Number(e)])?void 0:a[t])||String(e)},handleClickKeepingTime=(e,t,a,n,l)=>{const o=o=>{const s="AM"===e.context.selectedKeeping?"PM":"AM",i=transformTime24(e.context.selectedHours,s);Number(i)<=n&&Number(i)>=l?(setContext(e,"selectedKeeping",s),a.value=i,handleActions(e,o,e.context.selectedHours,"hour"),t.ariaLabel=`${e.labels.btnKeeping} ${e.context.selectedKeeping}`,t.innerText=e.context.selectedKeeping):e.onChangeTime&&e.onChangeTime(e,o,!0)};return t.addEventListener("click",o),()=>{t.removeEventListener("click",o)}},transformTime12=e=>({0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(e)]||String(e)),updateInputAndRange=(e,t,a,n)=>{e.value=a,t.value=n},updateKeepingTime$1=(e,t,a)=>{t&&a&&(setContext(e,"selectedKeeping",a),t.innerText=a)},handleInput$1=(e,t,a,n,l,o,s)=>{const i={hour:(i,r,c)=>{if(!e.selectionTimeMode)return;({12:()=>{if(!e.context.selectedKeeping)return;const d=Number(transformTime24(r,e.context.selectedKeeping));if(!(d<=o&&d>=s))return updateInputAndRange(a,t,e.context.selectedHours,e.context.selectedHours),void(e.onChangeTime&&e.onChangeTime(e,c,!0));updateInputAndRange(a,t,transformTime12(r),transformTime24(r,e.context.selectedKeeping)),i>12&&updateKeepingTime$1(e,n,"PM"),handleActions(e,c,transformTime12(r),l)},24:()=>{if(!(i<=o&&i>=s))return updateInputAndRange(a,t,e.context.selectedHours,e.context.selectedHours),void(e.onChangeTime&&e.onChangeTime(e,c,!0));updateInputAndRange(a,t,r,r),handleActions(e,c,r,l)}})[e.selectionTimeMode]()},minute:(n,i,r)=>{if(!(n<=o&&n>=s))return a.value=e.context.selectedMinutes,void(e.onChangeTime&&e.onChangeTime(e,r,!0));a.value=i,t.value=i,handleActions(e,r,i,l)}},r=e=>{const t=Number(a.value),n=a.value.padStart(2,"0");i[l]&&i[l](t,n,e)};return a.addEventListener("change",r),()=>{a.removeEventListener("change",r)}},updateInputAndTime=(e,t,a,n,l)=>{t.value=l,handleActions(e,a,l,n)},updateKeepingTime=(e,t,a)=>{t&&(setContext(e,"selectedKeeping",a),t.innerText=a)},handleRange=(e,t,a,n,l)=>{const o=o=>{const s=Number(t.value),i=t.value.padStart(2,"0"),r="hour"===l,c=24===e.selectionTimeMode,d=s>0&&s<12;r&&!c&&updateKeepingTime(e,n,0===s||d?"AM":"PM"),updateInputAndTime(e,a,o,l,!r||c||d?i:transformTime12(t.value))};return t.addEventListener("input",o),()=>{t.removeEventListener("input",o)}},handleMouseOver=e=>e.setAttribute("data-vc-input-focus",""),handleMouseOut=e=>e.removeAttribute("data-vc-input-focus"),handleTime=(e,t)=>{const a=t.querySelector('[data-vc-time-range="hour"] input[name="hour"]'),n=t.querySelector('[data-vc-time-range="minute"] input[name="minute"]'),l=t.querySelector('[data-vc-time-input="hour"] input[name="hour"]'),o=t.querySelector('[data-vc-time-input="minute"] input[name="minute"]'),s=t.querySelector('[data-vc-time="keeping"]');if(!(a&&n&&l&&o))return;const i=e=>{e.target===a&&handleMouseOver(l),e.target===n&&handleMouseOver(o)},r=e=>{e.target===a&&handleMouseOut(l),e.target===n&&handleMouseOut(o)};return t.addEventListener("mouseover",i),t.addEventListener("mouseout",r),handleInput$1(e,a,l,s,"hour",e.timeMaxHour,e.timeMinHour),handleInput$1(e,n,o,s,"minute",e.timeMaxMinute,e.timeMinMinute),handleRange(e,a,l,s,"hour"),handleRange(e,n,o,s,"minute"),s&&handleClickKeepingTime(e,s,a,e.timeMaxHour,e.timeMinHour),()=>{t.removeEventListener("mouseover",i),t.removeEventListener("mouseout",r)}},createTime=e=>{const t=e.context.mainElement.querySelector('[data-vc="time"]');if(!e.selectionTimeMode||!t)return;const[a,n]=[e.timeMinHour,e.timeMaxHour],[l,o]=[e.timeMinMinute,e.timeMaxMinute],s=e.context.selectedKeeping?transformTime24(e.context.selectedHours,e.context.selectedKeeping):e.context.selectedHours,i="range"===e.timeControls;var r;t.innerHTML=e.sanitizerHTML(`\n    <div class="${e.styles.timeContent}" data-vc-time="content">\n      ${TimeInput("hour",e.styles.timeHour,e.labels,e.context.selectedHours,i)}\n      ${TimeInput("minute",e.styles.timeMinute,e.labels,e.context.selectedMinutes,i)}\n      ${12===e.selectionTimeMode?(r=e.context.selectedKeeping,`<button type="button" class="${e.styles.timeKeeping}" aria-label="${e.labels.btnKeeping} ${r}" data-vc-time="keeping" ${i?"disabled":""}>${r}</button>`):""}\n    </div>\n    <div class="${e.styles.timeRanges}" data-vc-time="ranges">\n      ${TimeRange("hour",e.styles.timeRange,e.labels,a,n,e.timeStepHour,s)}\n      ${TimeRange("minute",e.styles.timeRange,e.labels,l,o,e.timeStepMinute,e.context.selectedMinutes)}\n    </div>\n  `),handleTime(e,t)},createWeek=e=>{const t=e.selectedWeekends?[...e.selectedWeekends]:[],a=[...e.context.locale.weekdays.long].reduce(((a,n,l)=>[...a,{id:l,titleShort:e.context.locale.weekdays.short[l],titleLong:n,isWeekend:t.includes(l)}]),[]),n=[...a.slice(e.firstWeekday),...a.slice(0,e.firstWeekday)];e.context.mainElement.querySelectorAll('[data-vc="week"]').forEach((t=>{const a=document.createElement("button");a.type="button",n.forEach((n=>{const l=a.cloneNode(!0);l.innerText=n.titleShort,l.className=e.styles.weekDay,l.role="columnheader",l.ariaLabel=n.titleLong,l.dataset.vcWeekDay=String(n.id),n.isWeekend&&(l.dataset.vcWeekDayOff=""),t.appendChild(l)}))}))},createYearEl=(e,t,a,n,l)=>{const o=t.cloneNode(!1);return o.className=e.styles.yearsYear,o.innerText=String(l),o.ariaLabel=String(l),o.role="gridcell",o.dataset.vcYearsYear=`${l}`,n&&(o.ariaDisabled="true"),n&&(o.tabIndex=-1),o.disabled=n,setYearModifier(e,o,"year",a===l,!1),o},createYears=(e,t)=>{var a;const n=(null==t?void 0:t.dataset.vcYear)?Number(t.dataset.vcYear):e.context.selectedYear;setContext(e,"currentType","year"),createLayouts(e,t),visibilityTitle(e),visibilityArrows(e);const l=e.context.mainElement.querySelector('[data-vc="years"]');if(!e.selectionYearsMode||!l)return;const o="multiple"!==e.type||e.context.selectedYear===n?0:1,s=document.createElement("button");s.type="button";for(let t=e.context.displayYear-7;t<e.context.displayYear+8;t++){const a=t<getDate(e.context.dateMin).getFullYear()+o||t>getDate(e.context.dateMax).getFullYear(),i=createYearEl(e,s,n,a,t);l.appendChild(i),e.onCreateYearEls&&e.onCreateYearEls(e,i)}null==(a=e.context.mainElement.querySelector("[data-vc-years-year]"))||a.focus()},trackChangesHTMLElement=(e,t,a)=>{new MutationObserver((e=>{for(let n=0;n<e.length;n++){if(e[n].attributeName===t){a();break}}})).observe(e,{attributes:!0})},haveListener={value:!1,set:()=>haveListener.value=!0,check:()=>haveListener.value},setTheme=(e,t)=>e.dataset.vcTheme=t,trackChangesThemeInSystemSettings=(e,t)=>{if(setTheme(e.context.mainElement,t.matches?"dark":"light"),"system"!==e.selectedTheme||haveListener.check())return;const a=e=>{const t=document.querySelectorAll('[data-vc="calendar"]');null==t||t.forEach((t=>setTheme(t,e.matches?"dark":"light")))};t.addEventListener?t.addEventListener("change",a):t.addListener(a),haveListener.set()},detectTheme=(e,t)=>{const a=e.themeAttrDetect.length?document.querySelector(e.themeAttrDetect):null,n=e.themeAttrDetect.replace(/^.*\[(.+)\]/g,((e,t)=>t));if(!a||"system"===a.getAttribute(n))return void trackChangesThemeInSystemSettings(e,t);const l=a.getAttribute(n);l?(setTheme(e.context.mainElement,l),trackChangesHTMLElement(a,n,(()=>{const t=a.getAttribute(n);t&&setTheme(e.context.mainElement,t)}))):trackChangesThemeInSystemSettings(e,t)},handleTheme=e=>{"not all"!==window.matchMedia("(prefers-color-scheme)").media?"system"===e.selectedTheme?detectTheme(e,window.matchMedia("(prefers-color-scheme: dark)")):setTheme(e.context.mainElement,e.selectedTheme):setTheme(e.context.mainElement,"light")},capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/\./,""),getLocaleWeekday=(e,t,a)=>{const n=new Date(`1978-01-0${t+1}T00:00:00.000Z`),l=n.toLocaleString(a,{weekday:"short",timeZone:"UTC"}),o=n.toLocaleString(a,{weekday:"long",timeZone:"UTC"});e.context.locale.weekdays.short.push(capitalizeFirstLetter(l)),e.context.locale.weekdays.long.push(capitalizeFirstLetter(o))},getLocaleMonth=(e,t,a)=>{const n=new Date(`1978-${String(t+1).padStart(2,"0")}-01T00:00:00.000Z`),l=n.toLocaleString(a,{month:"short",timeZone:"UTC"}),o=n.toLocaleString(a,{month:"long",timeZone:"UTC"});e.context.locale.months.short.push(capitalizeFirstLetter(l)),e.context.locale.months.long.push(capitalizeFirstLetter(o))},getLocale=e=>{var t,a,n,l,o,s,i,r;if(!(e.context.locale.weekdays.short[6]&&e.context.locale.weekdays.long[6]&&e.context.locale.months.short[11]&&e.context.locale.months.long[11]))if("string"==typeof e.locale){if("string"==typeof e.locale&&!e.locale.length)throw new Error(errorMessages.notLocale);Array.from({length:7},((t,a)=>getLocaleWeekday(e,a,e.locale))),Array.from({length:12},((t,a)=>getLocaleMonth(e,a,e.locale)))}else{if(!((null==(a=null==(t=e.locale)?void 0:t.weekdays)?void 0:a.short[6])&&(null==(l=null==(n=e.locale)?void 0:n.weekdays)?void 0:l.long[6])&&(null==(s=null==(o=e.locale)?void 0:o.months)?void 0:s.short[11])&&(null==(r=null==(i=e.locale)?void 0:i.months)?void 0:r.long[11])))throw new Error(errorMessages.notLocale);setContext(e,"locale",__spreadValues({},e.locale))}},create=e=>{const t={default:()=>{createWeek(e),createDates(e)},multiple:()=>{createWeek(e),createDates(e)},month:()=>createMonths(e),year:()=>createYears(e)};handleTheme(e),getLocale(e),createLayouts(e),visibilityTitle(e),visibilityArrows(e),createTime(e),t[e.context.currentType]()},handleArrowKeys=e=>{const t=()=>Array.from(e.context.mainElement.querySelectorAll('[data-vc="calendar"] button'));let a=0;const n={ArrowUp:(e,t)=>Math.max(0,e-t),ArrowDown:(e,a)=>Math.min(t().length-1,e+a),ArrowLeft:e=>Math.max(0,e-1),ArrowRight:e=>Math.min(t().length-1,e+1)},l=e=>{var l,o;if(!n[e.key]||"button"!==(null==(l=e.target)?void 0:l.localName))return;const s=t(),i=s[a].hasAttribute("data-vc-date-btn")?7:s[a].hasAttribute("data-vc-months-month")?4:s[a].hasAttribute("data-vc-years-year")?5:1;a=n[e.key](a,i),null==(o=s[a])||o.focus()};return e.context.mainElement.addEventListener("keydown",l),()=>{e.context.mainElement.removeEventListener("keydown",l)}},handleMonth=(e,t)=>{const a=getDate(getDateString(new Date(e.context.selectedYear,e.context.selectedMonth,1)));({prev:()=>a.setMonth(a.getMonth()-e.monthsToSwitch),next:()=>a.setMonth(a.getMonth()+e.monthsToSwitch)})[t](),setContext(e,"selectedMonth",a.getMonth()),setContext(e,"selectedYear",a.getFullYear()),visibilityTitle(e),visibilityArrows(e),createDates(e)},handleClickArrow=(e,t)=>{const a=t.target.closest("[data-vc-arrow]");if(a){if(["default","multiple"].includes(e.context.currentType))handleMonth(e,a.dataset.vcArrow);else if("year"===e.context.currentType&&void 0!==e.context.displayYear){const n={prev:-15,next:15}[a.dataset.vcArrow];setContext(e,"displayYear",e.context.displayYear+n),createYears(e,t.target)}e.onClickArrow&&e.onClickArrow(e,t)}},canToggleSelection=e=>void 0===e.enableDateToggle||("function"==typeof e.enableDateToggle?e.enableDateToggle(e):e.enableDateToggle),handleSelectDate=(e,t,a)=>{const n=t.dataset.vcDate,l=t.closest("[data-vc-date][data-vc-date-selected]"),o=canToggleSelection(e);if(l&&!o)return;const s=l?e.context.selectedDates.filter((e=>e!==n)):a?[...e.context.selectedDates,n]:[n];setContext(e,"selectedDates",s)},createDateRangeTooltip=(e,t,a)=>{if(!t)return;if(!a)return t.dataset.vcDateRangeTooltip="hidden",void(t.textContent="");const n=e.context.mainElement.getBoundingClientRect(),l=a.getBoundingClientRect();t.style.left=l.left-n.left+l.width/2+"px",t.style.top=l.bottom-n.top-l.height+"px",t.dataset.vcDateRangeTooltip="visible",t.innerHTML=e.sanitizerHTML(e.onCreateDateRangeTooltip(e,a,t,l,n))},state={self:null,lastDateEl:null,isHovering:!1,rangeMin:void 0,rangeMax:void 0,tooltipEl:null,timeoutId:null},addHoverEffect=(e,t,a)=>{var n,l,o;if(!(null==(l=null==(n=state.self)?void 0:n.context)?void 0:l.selectedDates[0]))return;const s=getDateString(e);(null==(o=state.self.context.disableDates)?void 0:o.includes(s))||(state.self.context.mainElement.querySelectorAll(`[data-vc-date="${s}"]`).forEach((e=>e.dataset.vcDateHover="")),t&&(t.dataset.vcDateHoverFirst=""),a&&(a.dataset.vcDateHoverLast=""))},removeHoverEffect=()=>{var e,t;if(!(null==(t=null==(e=state.self)?void 0:e.context)?void 0:t.mainElement))return;state.self.context.mainElement.querySelectorAll("[data-vc-date-hover], [data-vc-date-hover-first], [data-vc-date-hover-last]").forEach((e=>{e.removeAttribute("data-vc-date-hover"),e.removeAttribute("data-vc-date-hover-first"),e.removeAttribute("data-vc-date-hover-last")}))},handleHoverDatesEvent=e=>{var t,a;if(!e.target||!(null==(a=null==(t=state.self)?void 0:t.context)?void 0:a.selectedDates[0]))return;if(!e.target.closest('[data-vc="dates"]'))return state.lastDateEl=null,createDateRangeTooltip(state.self,state.tooltipEl,null),void removeHoverEffect();const n=e.target.closest("[data-vc-date]");if(!n||state.lastDateEl===n)return;state.lastDateEl=n,createDateRangeTooltip(state.self,state.tooltipEl,n),removeHoverEffect();const l=n.dataset.vcDate,o=getDate(state.self.context.selectedDates[0]),s=getDate(l),i=state.self.context.mainElement.querySelector(`[data-vc-date="${state.self.context.selectedDates[0]}"]`),r=state.self.context.mainElement.querySelector(`[data-vc-date="${l}"]`),[c,d]=o<s?[i,r]:[r,i],[u,m]=o<s?[o,s]:[s,o];for(let e=new Date(u);e<=m;e.setDate(e.getDate()+1))addHoverEffect(e,c,d)},handleHoverSelectedDatesRangeEvent=e=>{const t=e.target.closest("[data-vc-date-selected]");if(!t&&state.lastDateEl)return state.lastDateEl=null,void createDateRangeTooltip(state.self,state.tooltipEl,null);t&&state.lastDateEl!==t&&(state.lastDateEl=t,createDateRangeTooltip(state.self,state.tooltipEl,t))},optimizedHoverHandler=e=>t=>{state.isHovering||(state.isHovering=!0,requestAnimationFrame((()=>{e(t),state.isHovering=!1})))},optimizedHandleHoverDatesEvent=optimizedHoverHandler(handleHoverDatesEvent),optimizedHandleHoverSelectedDatesRangeEvent=optimizedHoverHandler(handleHoverSelectedDatesRangeEvent),handleCancelSelectionDates=e=>{state.self&&"Escape"===e.key&&(state.lastDateEl=null,setContext(state.self,"selectedDates",[]),state.self.context.mainElement.removeEventListener("mousemove",optimizedHandleHoverDatesEvent),state.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),createDateRangeTooltip(state.self,state.tooltipEl,null),removeHoverEffect())},handleMouseLeave=()=>{null!==state.timeoutId&&clearTimeout(state.timeoutId),state.timeoutId=setTimeout((()=>{state.lastDateEl=null,createDateRangeTooltip(state.self,state.tooltipEl,null),removeHoverEffect()}),50)},updateDisabledDates=()=>{var e,t,a,n;if(!(null==(a=null==(t=null==(e=state.self)?void 0:e.context)?void 0:t.selectedDates)?void 0:a[0])||!(null==(n=state.self.context.disableDates)?void 0:n[0]))return;const l=getDate(state.self.context.selectedDates[0]),[o,s]=state.self.context.disableDates.map((e=>getDate(e))).reduce((([e,t],a)=>[l>=a?a:e,l<a&&null===t?a:t]),[null,null]);o&&setContext(state.self,"displayDateMin",getDateString(new Date(o.setDate(o.getDate()+1)))),s&&setContext(state.self,"displayDateMax",getDateString(new Date(s.setDate(s.getDate()-1))));state.self.disableDatesPast&&!state.self.disableAllDates&&getDate(state.self.context.displayDateMin)<getDate(state.self.context.dateToday)&&setContext(state.self,"displayDateMin",state.self.context.dateToday)},handleSelectDateRange=(e,t)=>{state.self=e,state.lastDateEl=t,removeHoverEffect(),e.disableDatesGaps&&(state.rangeMin=state.rangeMin?state.rangeMin:e.context.displayDateMin,state.rangeMax=state.rangeMax?state.rangeMax:e.context.displayDateMax),e.onCreateDateRangeTooltip&&(state.tooltipEl=e.context.mainElement.querySelector("[data-vc-date-range-tooltip]"));const a=null==t?void 0:t.dataset.vcDate;if(a){const t=1===e.context.selectedDates.length&&e.context.selectedDates[0].includes(a),n=t&&!canToggleSelection(e)?[a,a]:t&&canToggleSelection(e)?[]:e.context.selectedDates.length>1?[a]:[...e.context.selectedDates,a];setContext(e,"selectedDates",n),e.context.selectedDates.length>1&&e.context.selectedDates.sort(((e,t)=>+new Date(e)-+new Date(t)))}({set:()=>(e.disableDatesGaps&&updateDisabledDates(),createDateRangeTooltip(state.self,state.tooltipEl,t),state.self.context.mainElement.removeEventListener("mousemove",optimizedHandleHoverSelectedDatesRangeEvent),state.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),state.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),state.self.context.mainElement.addEventListener("mousemove",optimizedHandleHoverDatesEvent),state.self.context.mainElement.addEventListener("mouseleave",handleMouseLeave),state.self.context.mainElement.addEventListener("keydown",handleCancelSelectionDates),()=>{state.self.context.mainElement.removeEventListener("mousemove",optimizedHandleHoverDatesEvent),state.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),state.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates)}),reset:()=>{const[a,n]=[e.context.selectedDates[0],e.context.selectedDates[e.context.selectedDates.length-1]],l=e.context.selectedDates[0]!==e.context.selectedDates[e.context.selectedDates.length-1],o=parseDates([`${a}:${n}`]).filter((t=>!e.context.disableDates.includes(t))),s=l?e.enableEdgeDatesOnly?[a,n]:o:[e.context.selectedDates[0],e.context.selectedDates[0]];if(setContext(e,"selectedDates",s),e.disableDatesGaps&&(setContext(e,"displayDateMin",state.rangeMin),setContext(e,"displayDateMax",state.rangeMax)),state.self.context.mainElement.removeEventListener("mousemove",optimizedHandleHoverDatesEvent),state.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),state.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),e.onCreateDateRangeTooltip)return e.context.selectedDates[0]||(state.self.context.mainElement.removeEventListener("mousemove",optimizedHandleHoverSelectedDatesRangeEvent),state.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),createDateRangeTooltip(state.self,state.tooltipEl,null)),e.context.selectedDates[0]&&(state.self.context.mainElement.addEventListener("mousemove",optimizedHandleHoverSelectedDatesRangeEvent),state.self.context.mainElement.addEventListener("mouseleave",handleMouseLeave),createDateRangeTooltip(state.self,state.tooltipEl,t)),()=>{state.self.context.mainElement.removeEventListener("mousemove",optimizedHandleHoverSelectedDatesRangeEvent),state.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave)}}})[1===e.context.selectedDates.length?"set":"reset"]()},updateDateModifier=e=>{e.context.mainElement.querySelectorAll("[data-vc-date]").forEach((t=>{const a=t.querySelector("[data-vc-date-btn]"),n=t.dataset.vcDate,l=getDate(n).getDay();setDateModifier(e,e.context.selectedYear,t,a,l,n,"current")}))},handleClickDate=(e,t)=>{var a;const n=t.target,l=n.closest("[data-vc-date-btn]");if(!e.selectionDatesMode||!["single","multiple","multiple-ranged"].includes(e.selectionDatesMode)||!l)return;const o=l.closest("[data-vc-date]");({single:()=>handleSelectDate(e,o,!1),multiple:()=>handleSelectDate(e,o,!0),"multiple-ranged":()=>handleSelectDateRange(e,o)})[e.selectionDatesMode](),null==(a=e.context.selectedDates)||a.sort(((e,t)=>+new Date(e)-+new Date(t))),e.onClickDate&&e.onClickDate(e,t),e.inputMode&&e.context.inputElement&&e.context.mainElement&&e.onChangeToInput&&e.onChangeToInput(e,t);const s=n.closest('[data-vc-date-month="prev"]'),i=n.closest('[data-vc-date-month="next"]');({prev:()=>e.enableMonthChangeOnDayClick?handleMonth(e,"prev"):updateDateModifier(e),next:()=>e.enableMonthChangeOnDayClick?handleMonth(e,"next"):updateDateModifier(e),current:()=>updateDateModifier(e)})[s?"prev":i?"next":"current"]()},typeClick=["month","year"],getColumnID=(e,t,a)=>{const n=e.context.mainElement.querySelectorAll('[data-vc="column"]'),l=Array.from(n).findIndex((e=>e.closest(`[data-vc-column="${t}"]`))),o=Number(n[l].querySelector(`[data-vc="${t}"]`).getAttribute(`data-vc-${t}`));return"month"===e.context.currentType&&l>=0?a-l:"year"===e.context.currentType&&e.context.selectedYear!==o?a-1:a},handleMultipleYearSelection=(e,t)=>{const a=getColumnID(e,"year",Number(t.dataset.vcYearsYear)),n=getDate(e.context.dateMin),l=getDate(e.context.dateMax),o=e.context.selectedMonth<n.getMonth()&&a<=n.getFullYear(),s=e.context.selectedMonth>l.getMonth()&&a>=l.getFullYear(),i=a<n.getFullYear(),r=a>l.getFullYear();setContext(e,"selectedYear",o||i?n.getFullYear():s||r?l.getFullYear():a),setContext(e,"selectedMonth",o||i?n.getMonth():s||r?l.getMonth():e.context.selectedMonth)},handleMultipleMonthSelection=(e,t)=>{const a=t.closest('[data-vc-column="month"]').querySelector('[data-vc="year"]'),n=getColumnID(e,"month",Number(t.dataset.vcMonthsMonth)),l=Number(a.dataset.vcYear),o=getDate(e.context.dateMin),s=getDate(e.context.dateMax),i=n<o.getMonth()&&l<=o.getFullYear(),r=n>s.getMonth()&&l>=s.getFullYear();setContext(e,"selectedYear",l),setContext(e,"selectedMonth",i?o.getMonth():r?s.getMonth():n)},handleItemClick=(e,t,a,n)=>{var l;({year:()=>{if("multiple"===e.type)return handleMultipleYearSelection(e,n);setContext(e,"selectedYear",Number(n.dataset.vcYearsYear))},month:()=>{if("multiple"===e.type)return handleMultipleMonthSelection(e,n);setContext(e,"selectedMonth",Number(n.dataset.vcMonthsMonth))}})[a]();({year:()=>{var a;return null==(a=e.onClickYear)?void 0:a.call(e,e,t)},month:()=>{var a;return null==(a=e.onClickMonth)?void 0:a.call(e,e,t)}})[a](),e.context.currentType!==e.type?(setContext(e,"currentType",e.type),create(e),null==(l=e.context.mainElement.querySelector(`[data-vc="${a}"]`))||l.focus()):setYearModifier(e,n,a,!0,!0)},handleClickType=(e,t,a)=>{var n;const l=t.target,o=l.closest(`[data-vc="${a}"]`),s={year:()=>createYears(e,l),month:()=>createMonths(e,l)};if(o&&e.onClickTitle&&e.onClickTitle(e,t),o&&e.context.currentType!==a)return s[a]();const i=l.closest(`[data-vc-${a}s-${a}]`);if(i)return handleItemClick(e,t,a,i);const r=l.closest('[data-vc="grid"]'),c=l.closest('[data-vc="column"]');(e.context.currentType===a&&o||"multiple"===e.type&&e.context.currentType===a&&r&&!c)&&(setContext(e,"currentType",e.type),create(e),null==(n=e.context.mainElement.querySelector(`[data-vc="${a}"]`))||n.focus())},handleClickMonthOrYear=(e,t)=>{const a={month:e.selectionMonthsMode,year:e.selectionYearsMode};typeClick.forEach((n=>{a[n]&&t.target&&handleClickType(e,t,n)}))},handleClickWeekNumber=(e,t)=>{if(!e.enableWeekNumbers||!e.onClickWeekNumber)return;const a=t.target.closest("[data-vc-week-number]"),n=e.context.mainElement.querySelectorAll("[data-vc-date-week-number]");if(!a||!n[0])return;const l=Number(a.innerText),o=Number(a.dataset.vcWeekYear),s=Array.from(n).filter((e=>Number(e.dataset.vcDateWeekNumber)===l));e.onClickWeekNumber(e,l,o,s,t)},handleClickWeekDay=(e,t)=>{if(!e.onClickWeekDay)return;const a=t.target.closest("[data-vc-week-day]"),n=t.target.closest('[data-vc="column"]'),l=n?n.querySelectorAll("[data-vc-date-week-day]"):e.context.mainElement.querySelectorAll("[data-vc-date-week-day]");if(!a||!l[0])return;const o=Number(a.dataset.vcWeekDay),s=Array.from(l).filter((e=>Number(e.dataset.vcDateWeekDay)===o));e.onClickWeekDay(e,o,s,t)},handleClick=e=>{const t=t=>{handleClickArrow(e,t),handleClickWeekDay(e,t),handleClickWeekNumber(e,t),handleClickDate(e,t),handleClickMonthOrYear(e,t)};return e.context.mainElement.addEventListener("click",t),()=>e.context.mainElement.removeEventListener("click",t)},initMonthsCount=e=>{if("multiple"===e.type&&(e.displayMonthsCount<=1||e.displayMonthsCount>12))throw new Error(errorMessages.incorrectMonthsCount);if("multiple"!==e.type&&e.displayMonthsCount>1)throw new Error(errorMessages.incorrectMonthsCount);setContext(e,"displayMonthsCount",e.displayMonthsCount?e.displayMonthsCount:"multiple"===e.type?2:1)},getLocalDate=()=>{const e=new Date;return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().substring(0,10)},resolveDate=(e,t)=>"today"===e?getLocalDate():e instanceof Date||"number"==typeof e||"string"==typeof e?parseDates([e])[0]:t,initRange=e=>{var t,a,n;const l=resolveDate(e.dateMin,e.dateMin),o=resolveDate(e.dateMax,e.dateMax),s=resolveDate(e.displayDateMin,l),i=resolveDate(e.displayDateMax,o);setContext(e,"dateToday",resolveDate(e.dateToday,e.dateToday)),setContext(e,"displayDateMin",s?getDate(l)>=getDate(s)?l:s:l),setContext(e,"displayDateMax",i?getDate(o)<=getDate(i)?o:i:o);const r=e.disableDatesPast&&!e.disableAllDates&&getDate(s)<getDate(e.context.dateToday);setContext(e,"displayDateMin",r||e.disableAllDates?e.context.dateToday:s),setContext(e,"displayDateMax",e.disableAllDates?e.context.dateToday:i),setContext(e,"disableDates",e.disableDates[0]&&!e.disableAllDates?parseDates(e.disableDates):e.disableAllDates?[e.context.displayDateMin]:[]),e.context.disableDates.length>1&&e.context.disableDates.sort(((e,t)=>+new Date(e)-+new Date(t))),setContext(e,"enableDates",e.enableDates[0]?parseDates(e.enableDates):[]),(null==(t=e.context.enableDates)?void 0:t[0])&&(null==(a=e.context.disableDates)?void 0:a[0])&&setContext(e,"disableDates",e.context.disableDates.filter((t=>!e.context.enableDates.includes(t)))),e.context.enableDates.length>1&&e.context.enableDates.sort(((e,t)=>+new Date(e)-+new Date(t))),(null==(n=e.context.enableDates)?void 0:n[0])&&e.disableAllDates&&(setContext(e,"displayDateMin",e.context.enableDates[0]),setContext(e,"displayDateMax",e.context.enableDates[e.context.enableDates.length-1])),setContext(e,"dateMin",e.displayDisabledDates?l:e.context.displayDateMin),setContext(e,"dateMax",e.displayDisabledDates?o:e.context.displayDateMax)},initSelectedDates=e=>{var t;setContext(e,"selectedDates",(null==(t=e.selectedDates)?void 0:t[0])?parseDates(e.selectedDates):[])},initSelectedMonthYear=e=>{var t;if(e.enableJumpToSelectedDate&&(null==(t=e.selectedDates)?void 0:t[0])&&void 0===e.selectedMonth&&void 0===e.selectedYear){const t=getDate(parseDates(e.selectedDates)[0]);return setContext(e,"selectedMonth",t.getMonth()),void setContext(e,"selectedYear",t.getFullYear())}const a=void 0!==e.selectedMonth&&Number(e.selectedMonth)>=0&&Number(e.selectedMonth)<12,n=void 0!==e.selectedYear&&Number(e.selectedYear)>=0&&Number(e.selectedYear)<=9999;setContext(e,"selectedMonth",a?Number(e.selectedMonth):getDate(e.context.dateToday).getMonth()),setContext(e,"selectedYear",n?Number(e.selectedYear):getDate(e.context.dateToday).getFullYear()),setContext(e,"displayYear",e.context.selectedYear)},initTime=e=>{var t,a,n;if(!e.selectionTimeMode)return;if(![12,24].includes(e.selectionTimeMode))throw new Error(errorMessages.incorrectTime);const l=12===e.selectionTimeMode,o=l?/^(0[1-9]|1[0-2]):([0-5][0-9]) ?(AM|PM)?$/i:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;let[s,i,r]=null!=(n=null==(a=null==(t=e.selectedTime)?void 0:t.match(o))?void 0:a.slice(1))?n:[];s?l&&!r&&(r="AM"):(s=l?transformTime12(String(e.timeMinHour)):String(e.timeMinHour),i=String(e.timeMinMinute),r=l?Number(transformTime12(String(e.timeMinHour)))>=12?"PM":"AM":null),setContext(e,"selectedHours",s.padStart(2,"0")),setContext(e,"selectedMinutes",i.padStart(2,"0")),setContext(e,"selectedKeeping",r),setContext(e,"selectedTime",`${e.context.selectedHours}:${e.context.selectedMinutes}${r?` ${r}`:""}`)},initAllVariables=e=>{setContext(e,"currentType",e.type),initMonthsCount(e),initRange(e),initSelectedMonthYear(e),initSelectedDates(e),initTime(e)},reset=(e,{year:t,month:a,dates:n,time:l,locale:o})=>{var s;const i={year:e.selectedYear,month:e.selectedMonth,dates:e.selectedDates,time:e.selectedTime};if(e.selectedYear=t?i.year:e.context.selectedYear,e.selectedMonth=a?i.month:e.context.selectedMonth,e.selectedTime=l?i.time:e.context.selectedTime,e.selectedDates="only-first"===n&&(null==(s=e.context.selectedDates)?void 0:s[0])?[e.context.selectedDates[0]]:!0===n?i.dates:e.context.selectedDates,o){setContext(e,"locale",{months:{short:[],long:[]},weekdays:{short:[],long:[]}})}initAllVariables(e),create(e),e.selectedYear=i.year,e.selectedMonth=i.month,e.selectedDates=i.dates,e.selectedTime=i.time,"multiple-ranged"===e.selectionDatesMode&&n&&handleSelectDateRange(e,null)};function findBestPickerPosition(e,t){const a="left";if(!t||!e)return a;const{canShow:n,parentPositions:l}=getAvailablePosition(e,t),o=n.left&&n.right;return(o&&n.bottom?"center":o&&n.top?["top","center"]:Array.isArray(l)?["bottom"===l[0]?"top":"bottom",...l.slice(1)]:l)||a}const setPosition=(e,t,a)=>{if(!e)return;const n="auto"===a?findBestPickerPosition(e,t):a,l={top:-t.offsetHeight,bottom:e.offsetHeight,left:0,center:e.offsetWidth/2-t.offsetWidth/2,right:e.offsetWidth-t.offsetWidth},o=Array.isArray(n)?n[0]:"bottom",s=Array.isArray(n)?n[1]:n;t.dataset.vcPosition=o;const{top:i,left:r}=getOffset(e),c=i+l[o];let d=r+l[s];const{vw:u}=getViewportDimensions();if(d+t.clientWidth>u){const e=window.innerWidth-document.body.clientWidth;d=u-t.clientWidth-e}else d<0&&(d=0);Object.assign(t.style,{left:`${d}px`,top:`${c}px`})},createToInput=(e,t=!0)=>{const a=document.createElement("div");return a.className=e.styles.calendar,a.dataset.vc="calendar",a.dataset.vcInput="",a.dataset.vcCalendarHidden="",a.style.visibility="hidden",setContext(e,"inputModeInit",!0),setContext(e,"mainElement",a),document.body.appendChild(e.context.mainElement),t&&queueMicrotask((()=>{setPosition(e.context.inputElement,a,e.positionToInput),e.context.mainElement.style.visibility="visible",e.show()})),reset(e,{year:!0,month:!0,dates:!0,time:!0,locale:!0}),e.onInit&&e.onInit(e),handleArrowKeys(e),handleClick(e)},handleInput=e=>{const t=[];setContext(e,"inputElement",e.context.mainElement);const a=()=>setPosition(e.context.inputElement,e.context.mainElement,e.positionToInput),n=t=>{var a,l;"Escape"===t.key&&((null==(a=null==e?void 0:e.context)?void 0:a.inputElement)&&(null==(l=null==e?void 0:e.context)?void 0:l.mainElement)&&e.hide(),document.removeEventListener("keydown",n))},l=t=>{e&&t.target!==e.context.inputElement&&!e.context.mainElement.contains(t.target)&&(e.context.inputElement&&e.context.mainElement&&e.hide(),window.removeEventListener("resize",a),document.removeEventListener("click",l,{capture:!0}))},o=()=>{e.context.inputModeInit?(setPosition(e.context.inputElement,e.context.mainElement,e.positionToInput),e.context.mainElement.style.visibility="visible",e.show()):t.push(createToInput(e)),window.addEventListener("resize",a),document.addEventListener("click",l,{capture:!0}),document.addEventListener("keydown",n)};return e.context.inputElement.addEventListener("click",o),e.context.inputElement.addEventListener("focus",o),()=>{t.forEach((e=>e()))}},init=e=>(setContext(e,"originalElement",e.context.mainElement.cloneNode(!0)),setContext(e,"isInit",!0),e.inputMode?handleInput(e):(initAllVariables(e),create(e),e.onInit&&e.onInit(e),handleArrowKeys(e),handleClick(e))),replaceProperties=(e,t)=>{const a=Object.keys(t);for(let n=0;n<a.length;n++){const l=a[n];"object"!=typeof e[l]||"object"!=typeof t[l]||t[l]instanceof Date||Array.isArray(t[l])?void 0!==t[l]&&(e[l]=t[l]):replaceProperties(e[l],t[l])}},set=(e,t,a)=>{replaceProperties(e,t),reset(e,__spreadValues(__spreadValues({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),a))},show=e=>{e.context.currentType?(e.context.mainElement.removeAttribute("data-vc-calendar-hidden"),e.onShow&&e.onShow(e)):e.context.mainElement.click()},update=(e,t)=>{if(!e.context.isInit)throw new Error(errorMessages.notInit);e.inputMode&&!e.context.inputModeInit&&createToInput(e,!1);reset(e,__spreadValues(__spreadValues({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),t)),e.onUpdate&&e.onUpdate(e)},labels={application:"Calendar",navigation:"Calendar Navigation",arrowNext:{month:"Next month",year:"Next list of years"},arrowPrev:{month:"Previous month",year:"Previous list of years"},month:"Select month, current selected month:",months:"List of months",year:"Select year, current selected year:",years:"List of years",week:"Days of the week",weekNumber:"Numbers of weeks in a year",dates:"Dates in the current month",selectingTime:"Selecting a time ",inputHour:"Hours",inputMinute:"Minutes",rangeHour:"Slider for selecting hours",rangeMinute:"Slider for selecting minutes",btnKeeping:"Switch AM/PM, current position:"},styles={calendar:"vc",controls:"vc-controls",grid:"vc-grid",column:"vc-column",header:"vc-header",headerContent:"vc-header__content",month:"vc-month",year:"vc-year",arrowPrev:"vc-arrow vc-arrow_prev",arrowNext:"vc-arrow vc-arrow_next",wrapper:"vc-wrapper",content:"vc-content",months:"vc-months",monthsMonth:"vc-months__month",years:"vc-years",yearsYear:"vc-years__year",week:"vc-week",weekDay:"vc-week__day",weekNumbers:"vc-week-numbers",weekNumbersTitle:"vc-week-numbers__title",weekNumbersContent:"vc-week-numbers__content",weekNumber:"vc-week-number",dates:"vc-dates",date:"vc-date",dateBtn:"vc-date__btn",datePopup:"vc-date__popup",dateRangeTooltip:"vc-date-range-tooltip",time:"vc-time",timeContent:"vc-time__content",timeHour:"vc-time__hour",timeMinute:"vc-time__minute",timeKeeping:"vc-time__keeping",timeRanges:"vc-time__ranges",timeRange:"vc-time__range"};class OptionsCalendar{constructor(){__publicField(this,"type","default"),__publicField(this,"inputMode",!1),__publicField(this,"positionToInput","left"),__publicField(this,"firstWeekday",1),__publicField(this,"monthsToSwitch",1),__publicField(this,"themeAttrDetect","html[data-theme]"),__publicField(this,"locale","en"),__publicField(this,"dateToday","today"),__publicField(this,"dateMin","1970-01-01"),__publicField(this,"dateMax","2470-12-31"),__publicField(this,"displayDateMin"),__publicField(this,"displayDateMax"),__publicField(this,"displayDatesOutside",!0),__publicField(this,"displayDisabledDates",!1),__publicField(this,"displayMonthsCount"),__publicField(this,"disableDates",[]),__publicField(this,"disableAllDates",!1),__publicField(this,"disableDatesPast",!1),__publicField(this,"disableDatesGaps",!1),__publicField(this,"disableWeekdays",[]),__publicField(this,"disableToday",!1),__publicField(this,"enableDates",[]),__publicField(this,"enableEdgeDatesOnly",!0),__publicField(this,"enableDateToggle",!0),__publicField(this,"enableWeekNumbers",!1),__publicField(this,"enableMonthChangeOnDayClick",!0),__publicField(this,"enableJumpToSelectedDate",!1),__publicField(this,"selectionDatesMode","single"),__publicField(this,"selectionMonthsMode",!0),__publicField(this,"selectionYearsMode",!0),__publicField(this,"selectionTimeMode",!1),__publicField(this,"selectedDates",[]),__publicField(this,"selectedMonth"),__publicField(this,"selectedYear"),__publicField(this,"selectedHolidays",[]),__publicField(this,"selectedWeekends",[0,6]),__publicField(this,"selectedTime"),__publicField(this,"selectedTheme","system"),__publicField(this,"timeMinHour",0),__publicField(this,"timeMaxHour",23),__publicField(this,"timeMinMinute",0),__publicField(this,"timeMaxMinute",59),__publicField(this,"timeControls","all"),__publicField(this,"timeStepHour",1),__publicField(this,"timeStepMinute",1),__publicField(this,"sanitizerHTML",(e=>e)),__publicField(this,"onClickDate"),__publicField(this,"onClickWeekDay"),__publicField(this,"onClickWeekNumber"),__publicField(this,"onClickTitle"),__publicField(this,"onClickMonth"),__publicField(this,"onClickYear"),__publicField(this,"onClickArrow"),__publicField(this,"onChangeTime"),__publicField(this,"onChangeToInput"),__publicField(this,"onCreateDateRangeTooltip"),__publicField(this,"onCreateDateEls"),__publicField(this,"onCreateMonthEls"),__publicField(this,"onCreateYearEls"),__publicField(this,"onInit"),__publicField(this,"onUpdate"),__publicField(this,"onDestroy"),__publicField(this,"onShow"),__publicField(this,"onHide"),__publicField(this,"popups",{}),__publicField(this,"labels",__spreadValues({},labels)),__publicField(this,"layouts",{default:"",multiple:"",month:"",year:""}),__publicField(this,"styles",__spreadValues({},styles))}}const _Calendar=class e extends OptionsCalendar{constructor(t,a){var n;super(),__publicField(this,"init",(()=>init(this))),__publicField(this,"update",(e=>update(this,e))),__publicField(this,"destroy",(()=>destroy(this))),__publicField(this,"show",(()=>show(this))),__publicField(this,"hide",(()=>hide(this))),__publicField(this,"set",((e,t)=>set(this,e,t))),__publicField(this,"context"),this.context=__spreadProps(__spreadValues({},this.context),{locale:{months:{short:[],long:[]},weekdays:{short:[],long:[]}}}),setContext(this,"mainElement","string"==typeof t?null!=(n=e.memoizedElements.get(t))?n:this.queryAndMemoize(t):t),a&&replaceProperties(this,a)}queryAndMemoize(t){const a=document.querySelector(t);if(!a)throw new Error(errorMessages.notFoundSelector(t));return e.memoizedElements.set(t,a),a}};__publicField(_Calendar,"memoizedElements",new Map);let Calendar=_Calendar;export{Calendar};